<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="AntEmpire - Un juego de estrategia sobre hormigas" />
  <title>AntEmpire - Prototipo v0.2.0 🐜</title>
  <link rel="stylesheet" href="/static/juego.css">
  <script src="/static/juego.js" defer></script>
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🐜</text></svg>">
</head>

<body>
  <!-- Barra superior: bienvenida y logout -->
  <div class="welcome-message">
    <span>🐜 Bienvenido, <strong id="usernameDisplay">hormiga</strong></span>
    <div class="controls">
      <button id="helpBtn" class="help-btn" title="Ayuda">❓</button>
      <button id="logoutBtn" onclick="cerrarSesion()">Cerrar sesión</button>
    </div>
  </div>
  <!-- js de bienvenida -->
  <script src="/static/welcome.js"></script>
  <!-- Logica del juego -->
  
  <!-- Título central y versión -->
  <header>
    <h1>AntEmpire – Prototipo</h1>
    <div class="version">v0.2.0</div>
  </header>

  <!-- Layout principal: sidebar izquierda, contenido, panel hormiguero -->
  <div class="dashboard">
    <!-- Panel lateral: Recursos -->
    <aside class="card">
      <h2>Recursos</h2>
      <div class="resources-container">
        <div class="resource" id="food">🍃 Hojas: <span class="resource-value">10</span></div>
        <div class="resource" id="fighters">🛡️ Combatientes: <span class="resource-value">0</span></div>
        <div class="resource" id="energy">⚡ Energía: <span class="resource-value">100</span></div>
      </div>
      
      <h2>Niveles</h2>
      <div class="resources-container">
        <div class="resource" id="levelExplorer">🔍 Exploradoras: Nivel <span class="resource-value">1</span></div>
        <div class="resource" id="levelFighter">⚔️ Guerreras: Nivel <span class="resource-value">1</span></div>
        <div class="resource" id="levelQueen">👑 Reina: Nivel <span class="resource-value">1</span></div>
        <div class="resource" id="levelCombat">🛡️ Combatientes: Nivel <span class="resource-value">1</span></div>
      </div>
      
      <h2>Entrenamiento</h2>
      <div class="button-group">
        <button id="btnCombatiente" class="action-btn" title="Entrena una hormiga combatiente para defender el hormiguero">Entrenar combatiente (-5 hojas)</button>
        <button id="btnExploradora" class="action-btn" title="Entrena una hormiga exploradora para reducir riesgos en misiones">Entrenar exploradora (-2 hojas)</button>
        <button id="btnGuerrera" class="action-btn" title="Entrena una hormiga guerrera para atacar otros hormigueros">Entrenar guerrera (-4 hojas)</button>
      </div>
    </aside>

    <!-- Zona principal: mini-mapa, acciones y log -->
    <main class="card">
      <h2>Mini-mapa <span class="map-legend">🟢 Hojas | 🟠 Semillas | 🔵 Agua | 🔴 Peligro</span></h2>
      <div id="miniMap"></div>

      <h2>Acciones</h2>
      <div id="animationZone">Selecciona una celda del minimapa para enviar una recolectora</div>
      <div id="progressBarContainer"><div id="progressBar"></div></div>

      <h2>Registro <button id="clearLog" class="small-btn" title="Limpiar registro">🗑️</button></h2>
      <div class="log" id="log"></div>
    </main>

    <!-- Panel derecho: Hormiguero -->
    <aside class="card">
      <h2>Hormiguero</h2>
      <div class="queen-status">
        <div>👑 Salud de la Reina</div>
        <div id="queenBar"><div id="queenHealth"></div></div>
      </div>
      
      <div class="colony-stats">
        <div class="stat-item" id="exploradoras">🔎 Exploradoras: <span class="stat-value">0</span></div>
        <div class="stat-item" id="guerreras">⚔️ Guerreras: <span class="stat-value">0</span></div>
      </div>
      
      <div class="button-group">
        <button id="btnAlimentar" class="action-btn" title="Alimenta a la reina para mantenerla saludable">Alimentar reina (-3 hojas)</button>
        <button id="btnAtaque" class="danger-btn" title="Simula un ataque enemigo">¡Ataque enemigo!</button>
      </div>
    </aside>
  </div>
  <!-- Modal de ayuda -->
  <div id="helpModal" class="modal">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <h2>Cómo jugar AntEmpire 🐜</h2>
      <div class="help-content">
        <h3>Objetivo</h3>
        <p>Construye y expande tu colonia de hormigas recolectando recursos y defendiéndote de ataques.</p>
        
        <h3>Recolección</h3>
        <p>Haz clic en las celdas del mapa para enviar hormigas recolectoras:</p>
        <ul>
          <li><span class="leaf-icon">🟢</span> <strong>Hojas</strong>: Recursos básicos (2-4 hojas)</li>
          <li><span class="seed-icon">🟠</span> <strong>Semillas</strong>: Más recursos pero más riesgo (3-7 hojas)</li>
          <li><span class="water-icon">🔵</span> <strong>Agua</strong>: Necesaria para la colonia</li>
          <li><span class="danger-icon">🔴</span> <strong>Peligro</strong>: Alto riesgo, posibles recompensas</li>
        </ul>
        
        <h3>Unidades</h3>
        <ul>
          <li><strong>Exploradoras</strong>: Reducen el riesgo en misiones</li>
          <li><strong>Combatientes</strong>: Defienden el hormiguero</li>
          <li><strong>Guerreras</strong>: Atacan otros hormigueros</li>
        </ul>
        
        <h3>Consejos</h3>
        <p>Mantén a tu reina alimentada y entrena suficientes combatientes para defenderte de ataques.</p>
      </div>
    </div>
  </div>
  
  <script>
    // Funcionalidad del modal de ayuda
    document.addEventListener('DOMContentLoaded', function() {
      const modal = document.getElementById('helpModal');
      const helpBtn = document.getElementById('helpBtn');
      const closeBtn = document.querySelector('.close-btn');
      const clearLogBtn = document.getElementById('clearLog');
      
      helpBtn.onclick = function() {
        modal.style.display = 'block';
      }
      
      closeBtn.onclick = function() {
        modal.style.display = 'none';
      }
      
      window.onclick = function(event) {
        if (event.target == modal) {
          modal.style.display = 'none';
        }
      }
      
      if (clearLogBtn) {
        clearLogBtn.onclick = function() {
          const logElement = document.getElementById('log');
          if (logElement) {
            logElement.innerHTML = '';
          }
        }
      }
    });
  </script>
</body>
</html>
